{"version":3,"sources":["components/Searchbar.js","components/ImageGalleryItem.js","components/Modal.js","components/Button.js","services/img-api.js","components/ImageGallery.js","App.jsx","index.js"],"names":["Searchbar","state","searchValue","handleChange","event","value","target","setState","handleSubmit","preventDefault","trim","props","onSubmitToApp","toast","error","className","onSubmit","this","type","autocomplete","autofocus","placeholder","onChange","React","Component","ImageGalleryItem","onClick","openBigImg","image","largeImageURL","src","webformatURL","alt","width","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleOverlayClick","currentTarget","window","addEventListener","removeEventListener","createPortal","children","Button","scroll","setTimeout","scrollTo","top","documentElement","scrollHeight","behavior","nextSearch","currentPage","url","fetch","then","response","ok","json","status","ImageGallery","images","currentImageUrl","showModal","onBtnClick","toggleModal","HandlerOpenBigImg","prevProps","prevState","prevSearch","console","log","ImgApi","hits","length","catch","loading","map","key","id","App","handleFormSubmit","ReactDOM","render","StrictMode","getElementById"],"mappings":"gOAiDeA,E,4MA5CbC,MAAQ,CACNC,YAAc,I,EAGhBC,aAAe,SAAAC,GAAS,IACdC,EAASD,EAAME,OAAfD,MACR,EAAKE,SAAS,CAACL,YAAaG,K,EAE9BG,aAAe,SAAAJ,GACbA,EAAMK,iBAEgC,KAAlC,EAAKR,MAAMC,YAAYQ,QAK3B,EAAKC,MAAMC,cAAc,EAAKX,MAAMC,aACpC,EAAKK,SAAS,CAACL,YAAa,MAL1BW,IAAMC,MAAM,2F,uDAUd,OACE,wBAAQC,UAAU,YAAlB,SACE,uBAAMC,SAAUC,KAAKT,aAAcO,UAAU,aAA7C,UACE,wBAAQG,KAAK,SAASH,UAAU,oBAAhC,SACE,sBAAMA,UAAU,0BAAhB,sBAGF,uBACEA,UAAU,mBACVG,KAAK,OACLC,aAAa,MACbC,WAAS,EACTC,YAAY,2BACZhB,MAAOY,KAAKhB,MAAMC,YAClBoB,SAAUL,KAAKd,wB,GArCHoB,IAAMC,W,OCQfC,EAXU,SAAnBA,EAAoBd,GAAD,OACvB,oBACEe,QAAS,kBAAMf,EAAMgB,WAAWhB,EAAMiB,MAAMC,gBAC5Cd,UAAWU,EAFb,SAIE,qBAAKK,IAAKnB,EAAMiB,MAAMG,aAAeC,IAAI,mBACvCC,MAAM,aCHNC,EAAYC,SAASC,cAAc,eAEpBC,E,4MAUnBC,cAAgB,SAAAC,GACA,WAAXA,EAAEC,MACH,EAAK7B,MAAM8B,W,EAIfC,mBAAqB,SAAAH,GACfA,EAAEI,gBAAkBJ,EAAEjC,QACxB,EAAKK,MAAM8B,W,kEAfbG,OAAOC,iBAAiB,UAAW5B,KAAKqB,iB,6CAIxCM,OAAOE,oBAAoB,UAAW7B,KAAKqB,iB,+BAgB3C,OAAOS,uBACL,qBAAKhC,UAAU,UAAUW,QAAST,KAAKyB,mBAAvC,SACE,qBAAK3B,UAAU,QAAf,SACGE,KAAKN,MAAMqC,aAGhBd,O,GA7B6BX,IAAMC,WCJpByB,E,4MACnBC,OAAS,WACP,EAAKvC,MAAMe,UACXyB,YAAW,WACTP,OAAOQ,SAAS,CACdC,IAAKlB,SAASmB,gBAAgBC,aAC9BC,SAAU,aAEX,M,uDAGH,OACE,wBAAQ9B,QAAST,KAAKiC,OAAQhC,KAAK,SAASH,UAAU,SAAtD,2B,GAZ8BQ,IAAMC,W,SCU3B,EAXE,SAAC,GAAkC,IAAhCiC,EAA+B,EAA/BA,WAAYC,EAAmB,EAAnBA,YAExBC,EAAG,qCAAiCF,EAAjC,iBAAoDC,EAApD,gBADO,qCACP,wDAET,OAAOE,MAAMD,GACVE,MAAK,SAAAC,GACJ,GAAIA,EAASC,GAAM,OAAOD,EAASE,OACnC,EAAKzD,SAAS,CAAC0D,OAAQ,iBCFRC,E,4MACnBjE,MAAQ,CACNkE,OAAQ,GACRT,YAAc,EACdO,OAAQ,OACRG,gBAAiB,KACjBC,WAAY,G,EA0CdC,WAAa,WACX,OAAO,EAAK/D,UAAS,SAAAN,GAAK,MACvB,CAACyD,YAAazD,EAAMyD,YAAc,O,EAIvCa,YAAc,WACZ,EAAKhE,UAAS,SAAAN,GAAK,MAAK,CACtBoE,WAAapE,EAAMoE,e,EAIvBG,kBAAoB,SAACb,GACnB,EAAKpD,SAAS,CAAE6D,gBAAiBT,IACjC,EAAKY,e,iEArDYE,EAAWC,GAAY,IAAD,OAEjCC,EAAaF,EAAUvE,YACvBuD,EAAaxC,KAAKN,MAAMT,YAC1BwD,EAAczC,KAAKhB,MAAMyD,YAEzBiB,IAAelB,GAAciB,EAAUhB,cAAgBA,IACzDzC,KAAKV,SAAS,CAAC0D,OAAS,YACxBW,QAAQC,IAAI,+FAERF,IAAelB,IACjBxC,KAAKV,SAAS,CAAC4D,OAAQ,KACrBQ,IAAelB,GACjBxC,KAAKV,SAAS,CAACmD,YAAa,KAS5BoB,EALc,CACdrB,aACAC,gBAICG,MAAK,SAAAC,GAMJ,OALAc,QAAQC,IAAIf,GACX,EAAKvD,UAAS,SAAAN,GAAK,MAAK,CACvBkE,OAAO,GAAD,mBAAMlE,EAAMkE,QAAZ,YAAuBL,EAASiB,WAExCH,QAAQC,IAAI,EAAK5E,MAAMkE,QACU,IAA7B,EAAKlE,MAAMkE,OAAOa,OAAsB,EAAKzE,SAAS,CAAE0D,OAAQ,aAC7D,EAAK1D,SAAS,CAAE0D,OAAQ,gBAEhCgB,OAAM,SAAAnE,GAAK,OAAI,EAAKP,SAAS,CAAE0D,OAAQ,gBAE1ChD,KAAKV,SAAS,CAAC2E,SAAS,O,+BAsBlB,IAAD,SAEwCjE,KAAKhB,MAA5CgE,EAFD,EAECA,OAAQI,EAFT,EAESA,UAAWD,EAFpB,EAEoBA,gBAE3B,MAAe,SAAXH,EACK,yHAEM,YAAXA,EACK,gJAEM,aAAXA,EACK,uDAA0BhD,KAAKN,MAAMT,eAE/B,aAAX+D,EAEA,qCACA,oBAAIlD,UAAU,eAAd,SACGE,KAAKhB,MAAMkE,OAAOgB,KAAI,SAACvD,EAAOwD,GAAR,OACrB,cAAC,EAAD,CACEzD,WAAY,EAAK6C,kBAEjB5C,MAAOA,GADFA,EAAMyD,SAKjB,cAAC,EAAD,CAAS3D,QAAST,KAAKqD,aAErBD,GAAc,cAAC,EAAD,CAAO5B,QAAUxB,KAAKsD,YAAtB,SACZ,qBAAKzC,IAAKsC,EAAiBpC,IAAI,eAfvC,M,GA9EsCT,IAAMC,WCA3B8D,E,4MACnBrF,MAAQ,CACNC,YAAc,I,EAGhBqF,iBAAmB,SAAArF,GACjB,EAAKK,SAAS,CAAEL,iB,uDAIhB,OACE,gCAEE,cAAC,EAAD,CAAWU,cAAeK,KAAKsE,mBAC/B,cAAC,EAAD,CAAcrF,YAAae,KAAKhB,MAAMC,qB,GAdbqB,IAAMC,W,MCCvCgE,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFvD,SAASwD,eAAe,W","file":"static/js/main.5eb23951.chunk.js","sourcesContent":["import React from 'react';\nimport { toast } from 'react-toastify' \n// import { v4 as uuidv4 } from 'uuid';\n\nclass Searchbar extends React.Component{\n  state = { \n    searchValue : ''\n  }\n\n  handleChange = event =>{\n    const { value} = event.target;\n    this.setState({searchValue: value})\n  }\n  handleSubmit = event =>{\n    event.preventDefault ();\n\n    if (this.state.searchValue.trim() === ''){\n      toast.error(\"Введите что-либо\");\n      return;\n    }\n      \n    this.props.onSubmitToApp(this.state.searchValue)\n    this.setState({searchValue: ''})\n  }\n\n  render (){\n\n    return(\n      <header className=\"Searchbar\">\n        <form onSubmit={this.handleSubmit} className=\"SearchForm\">\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autocomplete=\"off\"\n            autofocus\n            placeholder=\"Search images and photos\"\n            value={this.state.searchValue} \n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    )\n  }\n}\n\nexport default Searchbar","\nconst ImageGalleryItem = (props) => (\n  <li\n    onClick={() => props.openBigImg(props.image.largeImageURL)}\n    className={ImageGalleryItem}>\n\n    <img src={props.image.webformatURL}  alt=\"props.image.tags\" \n      width='300px'\n    />\n  </li> \n)\n\nexport default ImageGalleryItem;\n","import React from 'react';\nimport { createPortal } from 'react-dom';\n\n\nconst modalRoot = document.querySelector('#modal-root')\n\nexport default class Modal extends React.Component{\n  \n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown )\n  }\n  \n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown )\n  }\n\n  handleKeyDown = e =>{\n    if(e.code === 'Escape'){\n      this.props.onClose();\n    }\n  }\n\n  handleOverlayClick = e => {\n    if (e.currentTarget === e.target){\n      this.props.onClose();\n    }\n  }\n\n  render(){\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleOverlayClick}>\n        <div className=\"Modal\">\n          {this.props.children}\n        </div>\n      </div>,\n      modalRoot\n    );\n  }\n\n}","import React from 'react';\n\nexport default class Button extends React.Component{\n  scroll = () => {\n    this.props.onClick();\n    setTimeout(() => {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    }, 1000);\n  }\n  render(){\n    return(\n      <button onClick={this.scroll} type='button' className='Button'>Load more</button> \n    )\n  }\n\n}  ","\nconst fetchImg = ( {nextSearch, currentPage, }) => {\n  const  apiKey = \"18829521-149535e09ae4dfbd453ab9183\";\n  const url = `https://pixabay.com/api/?q=${nextSearch}&page=${currentPage}&key=${apiKey}&image_type=photo&orientation=horizontal&per_page=12`;\n \n  return fetch(url)\n    .then(response => {\n      if (response.ok) { return response.json()}\n      this.setState({status: 'rejected'})\n    })  \n  }\n\nexport default { fetchImg }  ","import React from 'react';\nimport ImageGalleryItem from './ImageGalleryItem'\nimport Modal from './Modal'\nimport Button from './Button'\nimport ImgApi from '../services/img-api'\n\nexport default class ImageGallery extends React.Component{\n  state = {\n    images: [],\n    currentPage : 1,\n    status: 'idle',\n    currentImageUrl: null,\n    showModal : false,\n}\n  \n  componentDidUpdate(prevProps, prevState) {\n\n    const prevSearch = prevProps.searchValue;\n    const nextSearch = this.props.searchValue;\n    let currentPage = this.state.currentPage;\n\n    if (prevSearch !== nextSearch || prevState.currentPage !== currentPage){\n      this.setState({status : 'pending'})\n      console.log(\"изменился запрос\");\n      \n      if (prevSearch !== nextSearch){\n        this.setState({images: []})\n      if (prevSearch !== nextSearch){\n        this.setState({currentPage: 1})\n      }    \n    }\n\n      const options = {\n        nextSearch, \n        currentPage,\n      }  \n\n        ImgApi.fetchImg(options)\n        .then(response => {\n          console.log(response);\n           this.setState(state => ({\n            images: [...state.images, ...response.hits]\n          }))\n          console.log(this.state.images);\n          if (this.state.images.length === 0) {return this.setState({ status: 'rejected' })} \n          return this.setState({ status: 'resolved' })\n        })\n        .catch(error => this.setState({ status: 'rejected' }))        \n      \n      this.setState({loading: true})\n      // fetchImg (this.props.searchValue)\n    }\n  }\n\n  onBtnClick = () =>{\n    return this.setState(state =>\n      ({currentPage: state.currentPage + 1}))\n  } \n \n\n  toggleModal = () => {\n    this.setState(state => ({\n      showModal : !state.showModal\n    }))\n  }\n\n  HandlerOpenBigImg = (url) => {\n    this.setState({ currentImageUrl: url})\n    this.toggleModal();\n  }\n\n  render() {\n\n    const { status, showModal, currentImageUrl } = this.state;\n\n    if (status === 'idle'){\n      return <div>Введите что-либо</div>\n    }\n    if (status === 'pending'){\n      return <div>подождите загружаем</div>\n    }\n    if (status === 'rejected'){\n      return <h1>Result not found for {this.props.searchValue}</h1>\n    }\n    if (status === 'resolved'){\n      return(\n        <>\n        <ul className=\"ImageGallery\">\n          {this.state.images.map((image, key) =>\n            <ImageGalleryItem \n              openBigImg={this.HandlerOpenBigImg}\n              key={image.id}\n              image={image}/>\n          )}\n        </ul>\n\n        <Button  onClick={this.onBtnClick}/>\n\n        { showModal &&  <Modal onClose ={this.toggleModal}>              \n            <img src={currentImageUrl} alt=\"\" /> \n          </Modal>}\n        </>\n      )\n    }    \n  }\n}  ","import React from 'react'; \n// import { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\n\nexport default class App extends React.Component {\n  state = { \n    searchValue : '',\n  }   \n\n  handleFormSubmit = searchValue => {\n    this.setState({ searchValue })\n  } \n \n  render() {\n    return (\n      <div>\n     \n        <Searchbar onSubmitToApp={this.handleFormSubmit}/>\n        <ImageGallery searchValue={this.state.searchValue}/>\n       \n        {/* <ToastContainer\n          position=\"top-right\"\n          autoClose={5000} />         */}\n  \n      </div>\n    )\n  }  \n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\n// ReactDOM.render(<App />, document.getElementById('root'));\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}